{% extends "layouts/base.html" %}
{% block yield %}

<script>
	
	Ext.require([
	    'Ext.data.*',
	    'Ext.grid.*',
	    'Ext.tree.*'
	]);

	Ext.onReady(function() {
		Ext.define('mm.tree', {
		    extend: 'Ext.tree.Panel',
		    
		    requires: [
		        'Ext.data.TreeStore'
		    ],
		    xtype: 'check-tree',
		    
		    
		    rootVisible: false,
		    useArrows: true,
		    frame: true,
		    title: 'Check Tree',
		    width: 250,
		    height: 300,
		    
		    initComponent: function(){

		        Ext.apply(this, {
		            store: new Ext.data.TreeStore({
		                proxy: {
		                    type: 'ajax',
		                    url: 'http://docs.sencha.com/extjs/4.2.1/extjs-build/examples/build/KitchenSink/ext-theme-neptune/resources/data/tree/check-nodes.json'
		                },
		                sorters: [{
		                    property: 'leaf',
		                    direction: 'ASC'
		                }, {
		                    property: 'text',
		                    direction: 'ASC'
		                }]
		            }),
		            tbar: [{
		                text: 'Get checked nodes',
		                scope: this,
		                handler: this.onCheckedNodesClick
		            }]
		        });
		        this.callParent();
		    },
		    
		    onCheckedNodesClick: function(){
		        var records = this.getView().getChecked(),
		            names = [];
		                   
		        Ext.Array.each(records, function(rec){
		            names.push(rec.get('text'));
		        });
		                    
		        Ext.MessageBox.show({
		            title: 'Selected Nodes',
		            msg: names.join('<br />'),
		            icon: Ext.MessageBox.INFO
		        });
		    }
		})

		Ext.create('mm.tree', {
		    renderTo: 'foo',
		    id: 'mmtree',
		    width: '400px',
		    height: '500px'
		});
	});

</script>

<div id="foo"></div>

{% endblock %}